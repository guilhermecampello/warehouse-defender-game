:root{--bg-color: #1a1a2e;--ui-bg: rgba(0, 0, 0, .8);--ui-bg-heavy: rgba(0, 0, 0, .85);--ui-border: #3d5a80;--ui-text: white;--ui-label: #98c1d9;--ui-value: #e0fbfc;--ui-accent-money: #4ecdc4;--ui-accent-wave: #ff6b6b;--btn-grad-start: #2d3748;--btn-grad-end: #1a202c;--btn-bg: linear-gradient(180deg, var(--btn-grad-start) 0%, var(--btn-grad-end) 100%);--btn-border: #4a5568;--btn-selected-start: #3d5a80;--btn-selected-end: #2d3748;--btn-selected: linear-gradient(180deg, var(--btn-selected-start) 0%, var(--btn-selected-end) 100%);--item-bg: rgba(61, 90, 128, .3);--item-border: #3d5a80;--shadow-color: rgba(78, 205, 196, .3);--loading-text: #4ecdc4;--loading-subtext: #98c1d9}.light-mode{--bg-color: #f0f2f5;--ui-bg: rgba(255, 255, 255, .9);--ui-bg-heavy: rgba(248, 249, 250, .95);--ui-border: #cbd5e0;--ui-text: #1a202c;--ui-label: #4a5568;--ui-value: #2d3748;--ui-accent-money: #2c7a7b;--ui-accent-wave: #c53030;--btn-grad-start: #edf2f7;--btn-grad-end: #e2e8f0;--btn-bg: linear-gradient(180deg, var(--btn-grad-start) 0%, var(--btn-grad-end) 100%);--btn-border: #cbd5e0;--btn-selected-start: #cbd5e0;--btn-selected-end: #a0aec0;--btn-selected: linear-gradient(180deg, var(--btn-selected-start) 0%, var(--btn-selected-end) 100%);--item-bg: rgba(226, 232, 240, .8);--item-border: #cbd5e0;--shadow-color: rgba(44, 122, 123, .3);--loading-text: #2c7a7b;--loading-subtext: #4a5568}*{margin:0;padding:0;box-sizing:border-box}html,body{width:100%;height:100%;overflow:hidden;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background:var(--bg-color);color:var(--ui-text);transition:background .3s ease,color .3s ease}#app{width:100%;height:100%;position:relative}#game-canvas{width:100%;height:100%;display:block}#ui-container{position:absolute;inset:0;pointer-events:none;z-index:10}#ui-container>*{pointer-events:auto}#hud{position:absolute;top:20px;left:50%;transform:translate(-50%);display:flex;gap:30px;background:var(--ui-bg);padding:12px 24px;border-radius:8px;border:2px solid var(--ui-border);color:var(--ui-text);font-size:16px;box-shadow:0 4px 15px #0003}.hud-stat{display:flex;align-items:center;gap:8px}.hud-stat .label{color:var(--ui-label);font-size:12px;text-transform:uppercase}.hud-stat .value{font-weight:700;font-size:18px;color:var(--ui-value)}.hud-stat.money .value{color:var(--ui-accent-money)}.hud-stat.wave .value{color:var(--ui-accent-wave)}.hud-stat.debug-hint{opacity:.5;font-size:12px}.hud-stat.debug-hint .value{font-size:12px;font-weight:400;color:var(--ui-label)}#build-menu{position:absolute;bottom:20px;left:50%;transform:translate(-50%);display:flex;flex-direction:column;align-items:center;gap:10px;background:var(--ui-bg-heavy);padding:15px 20px;border-radius:12px;border:2px solid var(--ui-border);box-shadow:0 4px 20px #0000004d}.build-btns-row{display:flex;gap:10px}.conveyor-toolbar-row{display:flex;align-items:center;gap:8px;width:100%;justify-content:center}.line-mode-btn{height:32px;padding:0 12px;background:var(--btn-bg);border:2px solid var(--btn-border);border-radius:8px;cursor:pointer;color:var(--ui-text);font-size:12px;display:flex;align-items:center;gap:4px;transition:all .2s ease;white-space:nowrap}.line-mode-btn:hover{border-color:var(--ui-accent-money);box-shadow:0 2px 8px var(--shadow-color)}.line-mode-btn.active{border-color:var(--ui-accent-money);background:var(--btn-selected);box-shadow:0 0 0 2px var(--ui-accent-money)}.line-mode-hint{font-size:11px;color:var(--ui-label);font-style:italic}.build-btn{width:70px;height:80px;background:var(--btn-bg);border:2px solid var(--btn-border);border-radius:8px;cursor:pointer;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px;transition:all .2s ease;color:var(--ui-text)}.build-btn:hover{border-color:var(--ui-accent-money);transform:translateY(-4px);box-shadow:0 4px 12px var(--shadow-color)}.build-btn.selected{border-color:var(--ui-accent-money);background:var(--btn-selected);box-shadow:0 0 0 2px var(--ui-accent-money)}.build-btn.disabled{opacity:.5;cursor:not-allowed}.build-btn .icon{font-size:24px}.build-btn .name{font-size:10px;text-transform:uppercase}.build-btn .cost{font-size:11px;color:var(--ui-accent-money);font-weight:700}#order-panel{position:absolute;top:80px;right:20px;width:200px;background:var(--ui-bg-heavy);border-radius:8px;border:2px solid var(--ui-border);padding:12px;color:var(--ui-text);pointer-events:auto;box-shadow:0 4px 15px #0003}#order-panel *{pointer-events:auto}.order-panel-title{font-size:14px;text-transform:uppercase;color:var(--ui-label);margin-bottom:10px;border-bottom:1px solid var(--ui-border);padding-bottom:8px}.order-item{background:var(--item-bg);border-radius:4px;padding:8px;margin-bottom:8px;display:flex;flex-direction:column;gap:6px}.order-item .order-top-row{display:flex;justify-content:space-between;align-items:center;gap:6px}.order-item.status-pending{border-left:3px solid var(--ui-label)}.order-item.status-awaiting{border-left:3px solid #f59e0b;background:#f59e0b1a}.order-item.status-loading{border-left:3px solid #3b82f6;background:#3b82f61a}.order-item.status-shipped{border-left:3px solid #22c55e;background:#22c55e1a}.order-item .status-badge{font-size:11px;padding:2px 6px;border-radius:4px;background:#0000004d;white-space:nowrap;color:#fff}.order-item .quantity{font-weight:700;color:var(--ui-value)}.order-item .timer{font-size:12px;color:var(--ui-accent-money)}.order-item .timer.urgent{color:var(--ui-accent-wave);animation:pulse 1s infinite}.order-item .reward{font-size:11px;color:var(--ui-accent-money);font-weight:700}.order-item .fulfill-btn{padding:4px 8px;background:linear-gradient(180deg,#22c55e,#16a34a);border:2px solid #4ade80;border-radius:6px;color:#fff;font-size:11px;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease;pointer-events:auto}.order-item .fulfill-btn:hover{background:linear-gradient(180deg,#16a34a,#15803d);transform:scale(1.05);box-shadow:0 2px 8px #22c55e66}.order-item .fulfill-btn:active{transform:scale(.95)}.order-progress-bar{width:100%;height:4px;background:#0000004d;border-radius:2px;overflow:hidden}.order-progress-fill{height:100%;background:linear-gradient(90deg,#3b82f6,#60a5fa);border-radius:2px;transition:width .3s ease}@keyframes pulse{0%,to{opacity:1}50%{opacity:.5}}#phase-indicator{position:absolute;bottom:20px;left:20px;background:var(--ui-bg-heavy);border-radius:8px;border:2px solid var(--ui-border);padding:12px 20px;color:var(--ui-text);box-shadow:0 4px 15px #0003;z-index:60}.phase-title{font-size:12px;text-transform:uppercase;color:var(--ui-label)}.phase-name{font-size:18px;font-weight:700;color:var(--ui-accent-money)}.phase-name.operations{color:var(--ui-accent-wave)}.phase-controls{display:flex;gap:8px;margin-top:10px}.phase-btn{padding:6px 12px;background:var(--ui-border);border:none;border-radius:4px;color:#fff;cursor:pointer;font-size:12px;transition:background .2s}.phase-btn:hover,.phase-btn.active{background:var(--ui-accent-money)}.speed-controls,.camera-view-controls{display:flex;gap:4px;margin-top:8px}.camera-view-btn{flex:1;padding:4px 6px;background:var(--btn-grad-start);border:1px solid var(--btn-border);border-radius:4px;color:var(--ui-text);cursor:pointer;font-size:11px;white-space:nowrap}.camera-view-btn:hover{background:var(--ui-border);border-color:var(--ui-border);color:#fff}.camera-view-btn.active{background:var(--ui-accent-money);border-color:var(--ui-accent-money);color:#fff}.speed-btn{width:32px;height:28px;background:var(--btn-grad-start);border:1px solid var(--btn-border);border-radius:4px;color:var(--ui-text);cursor:pointer;font-size:11px}.speed-btn:hover,.speed-btn.active{background:var(--ui-accent-money);border-color:var(--ui-accent-money);color:#fff}#selection-panel{position:absolute;bottom:120px;right:20px;width:280px;background:var(--ui-bg-heavy);border-radius:12px;border:2px solid var(--ui-border);padding:15px;color:var(--ui-text);box-shadow:0 4px 20px #0000004d;pointer-events:auto;transition:all .3s ease;z-index:20}#selection-panel.hidden{opacity:0;transform:translateY(20px);pointer-events:none;visibility:hidden}.selection-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid var(--ui-border)}.selection-title{display:flex;align-items:center;gap:8px}.selection-title .icon{font-size:24px}.selection-title .name{font-size:18px;font-weight:700}.selection-id{font-size:10px;color:var(--ui-label);font-family:monospace}.selection-content{display:flex;flex-direction:column;gap:12px}.selection-info-item{display:flex;justify-content:space-between;font-size:13px}.selection-info-item .label{color:var(--ui-label)}.selection-info-item .value{font-weight:700}.selection-storage-type-row{align-items:center}.storage-type-picker{display:flex;align-items:center;gap:6px}.storage-type-btn{background:var(--item-bg);border:1px solid var(--ui-border);border-radius:4px;color:var(--ui-text);font-size:11px;width:28px;height:28px;cursor:pointer;display:flex;align-items:center;justify-content:center;padding:0;transition:background .15s ease,border-color .15s ease;min-width:36px;min-height:36px;touch-action:manipulation}.storage-type-btn:hover,.storage-type-btn:active{background:var(--ui-accent);border-color:var(--ui-accent);color:#fff}.storage-type-label{font-size:12px;font-weight:700;min-width:72px;text-align:center}.selection-worker-status{background:var(--item-bg);padding:10px;border-radius:8px;margin-top:5px}.worker-status-header{font-size:11px;text-transform:uppercase;color:var(--ui-label);margin-bottom:5px}.worker-status-value{font-size:14px;font-weight:700;color:var(--ui-accent-money)}.task-filter-list{display:flex;flex-direction:column;gap:4px}.task-filter-item{display:flex;align-items:center;gap:6px;font-size:13px;color:var(--ui-text);cursor:pointer}.task-filter-item input[type=checkbox]{accent-color:var(--ui-accent-money);width:14px;height:14px;cursor:pointer}.selection-actions{margin-top:15px;display:flex;gap:10px}.move-btn{padding:10px;background:linear-gradient(180deg,#4ecdc4,#38b2ac);border:none;border-radius:6px;color:#fff;font-weight:700;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:6px;white-space:nowrap;min-width:36px;min-height:36px;touch-action:manipulation}.move-btn:hover{filter:brightness(1.1);transform:translateY(-2px);box-shadow:0 4px 12px #4ecdc44d}.move-btn:active{transform:translateY(0)}.move-btn.active{background:linear-gradient(180deg,#f39c12,#e67e22);box-shadow:0 0 8px #f39c1280}body.move-mode canvas{cursor:move}.sell-btn{flex:1;padding:10px;background:linear-gradient(180deg,#ff6b6b,#ee5253);border:none;border-radius:6px;color:#fff;font-weight:700;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:6px}.sell-btn:hover{filter:brightness(1.1);transform:translateY(-2px);box-shadow:0 4px 12px #ff6b6b4d}.sell-btn:active{transform:translateY(0)}.rotate-btn{padding:5px 10px;background:linear-gradient(180deg,#4ecdc4,#38b2ac);border:none;border-radius:5px;color:#fff;font-weight:700;font-size:12px;cursor:pointer;transition:all .2s ease;white-space:nowrap}.rotate-btn:hover{filter:brightness(1.1);transform:translateY(-1px);box-shadow:0 3px 8px #4ecdc44d}.rotate-btn:active{transform:translateY(0)}.teardrop-btn{background:var(--storage-type-color, var(--item-bg));border:1px solid var(--ui-border);border-radius:4px;color:var(--ui-text);font-size:14px;width:28px;height:28px;cursor:pointer;display:flex;align-items:center;justify-content:center;padding:0;transition:background .15s ease,border-color .15s ease;min-width:36px;min-height:36px;touch-action:manipulation}.teardrop-btn:hover{background:color-mix(in srgb,var(--storage-type-color, var(--ui-accent)) 80%,#fff);border-color:var(--storage-type-color, var(--ui-accent))}.teardrop-btn.active{background:var(--storage-type-color, #e67e22);border-color:color-mix(in srgb,var(--storage-type-color, #e67e22) 70%,#000);color:#fff;box-shadow:0 0 8px color-mix(in srgb,var(--storage-type-color, #e67e22) 70%,transparent)}body.teardrop-mode canvas{cursor:crosshair}#loading-screen{position:absolute;inset:0;background:var(--bg-color);display:flex;flex-direction:column;align-items:center;justify-content:center;color:var(--ui-text);z-index:100}#loading-screen h1{font-size:48px;color:var(--loading-text);margin-bottom:20px}#loading-screen p{font-size:18px;color:var(--loading-subtext)}#loading-screen.hidden{display:none}.menu-title{text-align:center;margin-bottom:40px}.menu-title h1{font-size:52px;color:var(--loading-text);margin-bottom:10px;text-shadow:0 0 20px var(--shadow-color)}.menu-tagline{font-size:16px;color:var(--loading-subtext)}.game-menu{display:flex;flex-direction:column;align-items:center;gap:14px;min-width:280px}.menu-btn{width:100%;padding:14px 24px;font-size:18px;font-weight:700;border:2px solid transparent;border-radius:10px;cursor:pointer;transition:all .2s ease;letter-spacing:.5px}.menu-btn-primary{background:linear-gradient(180deg,#4ecdc4,#38b2ac);color:#1a1a2e;border-color:#4ecdc4}.menu-btn-primary:hover{filter:brightness(1.1);transform:translateY(-3px);box-shadow:0 6px 20px var(--shadow-color)}.menu-btn-secondary{background:linear-gradient(180deg,var(--btn-grad-start) 0%,var(--btn-grad-end) 100%);color:var(--ui-text);border-color:var(--ui-border)}.menu-btn-secondary:hover{border-color:var(--ui-accent-money);transform:translateY(-3px);box-shadow:0 6px 20px var(--shadow-color)}.menu-save-info{display:flex;gap:16px;font-size:12px;color:var(--ui-label);text-align:center}.save-slots-header{font-size:12px;text-transform:uppercase;letter-spacing:2px;color:var(--ui-label);margin-top:6px}.save-slots-list{display:flex;flex-direction:column;gap:8px;width:100%}.save-slot{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:10px 14px;border-radius:8px;border:2px solid var(--ui-border);background:var(--ui-bg-heavy);transition:border-color .2s}.save-slot-used:hover{border-color:var(--ui-accent-money)}.save-slot-empty{border-style:dashed;opacity:.5;justify-content:center}.save-slot-empty-label{font-size:13px;color:var(--ui-label)}.save-slot-info{display:flex;flex-direction:column;gap:2px;min-width:0;flex:1}.save-slot-name{font-weight:700;font-size:14px;color:var(--ui-text);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.save-slot-meta{font-size:11px;color:var(--ui-label);white-space:nowrap}.save-slot-actions{display:flex;gap:6px;flex-shrink:0}.slot-btn{padding:6px 12px;border-radius:6px;font-size:12px;font-weight:700;cursor:pointer;transition:all .15s ease;border:2px solid transparent}.slot-btn-load{background:linear-gradient(180deg,#4ecdc4,#38b2ac);color:#1a1a2e;border-color:#4ecdc4}.slot-btn-load:hover{filter:brightness(1.1);transform:translateY(-1px)}.slot-btn-delete{background:transparent;color:var(--ui-label);border-color:var(--ui-border)}.slot-btn-delete:hover{border-color:#e53e3e;color:#e53e3e;transform:translateY(-1px)}.sandbox-form{display:flex;flex-direction:column;gap:8px;width:100%;margin-bottom:8px}.sandbox-label{font-size:13px;color:var(--ui-label);font-weight:700;margin-top:4px}.sandbox-input{width:100%;padding:10px 12px;font-size:16px;border-radius:8px;border:2px solid var(--ui-border);background:var(--ui-bg-heavy);color:var(--ui-text);box-sizing:border-box;transition:border-color .2s}.sandbox-input:focus{outline:none;border-color:var(--ui-accent-money)}.how-to-play-container{display:flex;flex-direction:column;width:min(760px,94vw);max-height:88vh;background:var(--ui-bg-heavy);border:2px solid var(--ui-border);border-radius:14px;overflow:hidden;box-shadow:0 8px 32px #0006}.how-to-play-header{display:flex;align-items:center;justify-content:space-between;padding:18px 24px 14px;border-bottom:1px solid var(--ui-border);flex-shrink:0}.how-to-play-title{font-size:22px;font-weight:700;color:var(--loading-text);margin:0}.how-to-play-back{width:auto;padding:8px 18px;font-size:14px}.tutorial-tabs{display:flex;flex-wrap:wrap;gap:6px;padding:12px 16px;border-bottom:1px solid var(--ui-border);flex-shrink:0;background:var(--ui-bg)}.tutorial-tab{padding:7px 13px;font-size:13px;font-weight:600;background:var(--btn-bg);border:2px solid var(--btn-border);border-radius:8px;color:var(--ui-label);cursor:pointer;transition:all .15s ease;white-space:nowrap}.tutorial-tab:hover{border-color:var(--ui-accent-money);color:var(--ui-text)}.tutorial-tab.active{background:var(--btn-selected);border-color:var(--ui-accent-money);color:var(--ui-text)}.tutorial-content{flex:1;overflow-y:auto;padding:24px}.tutorial-section{display:none}.tutorial-section.active{display:block}.tutorial-section-title{font-size:19px;font-weight:700;color:var(--loading-text);margin-bottom:14px}.tutorial-section p{font-size:14px;color:var(--ui-text);line-height:1.7;margin-bottom:12px}.tutorial-section ul{padding-left:20px;margin-bottom:12px}.tutorial-section li{font-size:14px;color:var(--ui-text);line-height:1.7;margin-bottom:6px}.tutorial-section strong{color:var(--ui-accent-money)}.tutorial-subtitle{font-size:15px;font-weight:700;color:var(--loading-text);margin:18px 0 8px}.zone-badge{display:inline-block;padding:2px 8px;border-radius:4px;font-weight:700;font-size:13px;color:#fff}.zone-unloading{background:#ff9500}.zone-storage{background:#4caf50}.zone-picking{background:#9c27b0}.zone-loading{background:#f44336}.layout-flow-diagram{background:var(--ui-bg);border:1px solid var(--ui-border);border-radius:10px;padding:16px;margin:10px 0 14px;overflow-x:auto}.flow-row{display:flex;align-items:center;justify-content:center;gap:4px;flex-wrap:wrap}.flow-node{padding:8px 10px;border-radius:6px;font-size:12px;font-weight:700;text-align:center;color:#fff;min-width:72px}.flow-truck{background:#607d8b}.flow-unloading{background:#ff9500}.flow-storage{background:#4caf50}.flow-picking{background:#9c27b0}.flow-loading{background:#f44336}.flow-arrow{font-size:20px;color:var(--ui-label);font-weight:700}.flow-labels{display:flex;justify-content:space-around;margin-top:6px;font-size:11px;color:var(--ui-label);font-style:italic}.layout-example{background:var(--ui-bg);border:1px solid var(--ui-border);border-radius:10px;padding:14px;margin:10px 0 14px;overflow-x:auto}.layout-svg{width:100%;max-width:620px;height:auto;display:block;margin:0 auto}.debug-log-container{display:flex;flex-direction:column;width:min(700px,94vw);max-height:88vh;background:var(--ui-bg-heavy);border:2px solid var(--ui-border);border-radius:14px;overflow:hidden;box-shadow:0 8px 32px #0006}.debug-log-header{display:flex;align-items:center;justify-content:space-between;padding:18px 24px 14px;border-bottom:1px solid var(--ui-border);flex-shrink:0}.debug-log-title{font-size:22px;font-weight:700;color:var(--loading-text);margin:0}.debug-log-actions{display:flex;gap:8px}.debug-log-back-btn,.debug-log-clear-btn{width:auto;padding:8px 16px;font-size:14px}.debug-log-entries{overflow-y:auto;flex:1;padding:12px 16px;display:flex;flex-direction:column;gap:4px;font-family:Courier New,Courier,monospace;font-size:12px}.debug-log-empty{text-align:center;color:var(--ui-label);padding:40px 0;font-style:italic}.debug-log-entry{display:flex;align-items:baseline;gap:6px;padding:4px 8px;border-radius:4px;background:var(--item-bg);overflow-wrap:break-word}.debug-log-time{color:var(--ui-label);white-space:nowrap;flex-shrink:0}.debug-log-icon{flex-shrink:0}.debug-log-msg{color:var(--ui-text);line-height:1.4}.debug-log-warn .debug-log-msg{color:#f6c90e}.debug-log-error .debug-log-msg{color:#ff6b6b}.hud-save-btn{background:linear-gradient(180deg,var(--btn-grad-start) 0%,var(--btn-grad-end) 100%);border:2px solid var(--btn-border);border-radius:6px;color:var(--ui-text);font-size:13px;font-weight:700;padding:4px 10px;cursor:pointer;transition:all .2s ease;white-space:nowrap}.hud-save-btn:hover{border-color:var(--ui-accent-money);transform:translateY(-2px);box-shadow:0 3px 8px var(--shadow-color)}.hud-save-btn:active{transform:translateY(0)}.game-notification{position:fixed;bottom:100px;left:50%;transform:translate(-50%);background:var(--ui-bg-heavy);border:2px solid var(--ui-border);border-radius:8px;padding:10px 20px;font-size:15px;font-weight:700;color:var(--ui-text);z-index:500;pointer-events:none;transition:opacity .5s ease}.game-notification.fade-out{opacity:0}#wave-preview{position:absolute;top:20px;left:20px;width:220px;background:var(--ui-bg-heavy);border-radius:8px;border:2px solid var(--ui-border);padding:12px;color:var(--ui-text);transition:transform .3s ease,opacity .3s ease;box-shadow:0 4px 15px #0003}#wave-preview.hidden{transform:translate(-250px);opacity:0;pointer-events:none}.wave-preview-title{font-size:14px;text-transform:uppercase;color:var(--ui-label);margin-bottom:10px;border-bottom:1px solid var(--ui-border);padding-bottom:8px;display:flex;justify-content:space-between;align-items:center}.wave-preview-title .wave-number{background:var(--ui-accent-wave);color:#fff;padding:2px 8px;border-radius:4px;font-size:12px;font-weight:700}.wave-preview-content{display:flex;flex-direction:column;gap:10px}.wave-stat{display:flex;align-items:center;gap:10px;background:var(--item-bg);padding:8px 10px;border-radius:6px}.wave-stat .icon{font-size:20px;width:30px;text-align:center}.wave-stat .info{flex:1}.wave-stat .info .label{font-size:10px;color:var(--ui-label);text-transform:uppercase}.wave-stat .info .value{font-size:14px;font-weight:700;color:var(--ui-value)}.outbound-orders-preview{margin-top:10px;background:#ff950014;border:1px solid rgba(255,149,0,.25);border-radius:6px;padding:8px 10px}.outbound-preview-label{font-size:10px;color:#ff9500;text-transform:uppercase;letter-spacing:.5px;margin-bottom:6px;font-weight:600}.outbound-preview-list{display:flex;flex-direction:column;gap:4px}.outbound-preview-order{display:flex;align-items:center;gap:6px;font-size:12px}.outbound-preview-icon{font-size:13px}.outbound-preview-qty{flex:1;color:var(--ui-text)}.outbound-preview-reward{color:#4caf50;font-weight:600;font-size:11px}.wave-difficulty{margin-top:5px}.wave-difficulty .label{font-size:10px;color:var(--ui-label);text-transform:uppercase;margin-bottom:4px}.difficulty-bar{height:6px;background:var(--btn-grad-start);border-radius:3px;overflow:hidden}.difficulty-fill{height:100%;border-radius:3px;transition:width .3s ease}.difficulty-fill.easy{background:linear-gradient(90deg,#4ecdc4,#45b7aa)}.difficulty-fill.medium{background:linear-gradient(90deg,#ffd93d,#f5c900)}.difficulty-fill.hard{background:linear-gradient(90deg,#ff6b6b,#ee5253)}.difficulty-fill.extreme{background:linear-gradient(90deg,#a855f7,#7c3aed)}.wave-timer{text-align:center;padding:8px;background:#ff6b6b33;border-radius:6px;border:1px solid rgba(255,107,107,.3)}.wave-timer .label{font-size:10px;color:var(--ui-accent-wave);text-transform:uppercase}.wave-timer .time{font-size:24px;font-weight:700;color:var(--ui-accent-wave);font-family:Courier New,monospace}.wave-progress-section{margin-top:10px;width:100%}.wave-progress-label{font-size:10px;color:var(--ui-label);text-transform:uppercase;margin-bottom:8px}.wave-progress-bar-container{position:relative;height:40px;width:100%}.wave-progress-bar{position:absolute;top:50%;transform:translateY(-50%);width:100%;height:8px;background:#2d3748cc;border-radius:4px;overflow:hidden;box-shadow:inset 0 1px 3px #00000080}.wave-progress-fill{height:100%;background:linear-gradient(90deg,#4ecdc4,#45b7aa);border-radius:4px;transition:width .3s ease;box-shadow:0 0 10px #4ecdc480}.truck-indicator{position:absolute;top:0;transform:translate(-50%);display:flex;flex-direction:column;align-items:center;cursor:pointer;transition:all .3s ease}.truck-indicator .truck-icon{font-size:18px;filter:grayscale(100%) brightness(.6);transition:all .3s ease;margin-bottom:2px}.truck-indicator.passed .truck-icon{filter:grayscale(0%) brightness(1);animation:truck-pulse 2s infinite}.truck-indicator.current .truck-icon{filter:grayscale(0%) brightness(1.2);transform:scale(1.2);animation:truck-bounce .5s infinite alternate}.truck-indicator.gone .truck-icon{filter:grayscale(0%) brightness(1);color:#10b981;font-weight:700;font-size:20px;background:#10b98133;border-radius:50%;width:22px;height:22px;display:flex;align-items:center;justify-content:center;border:2px solid #10b981}.truck-indicator .truck-time{font-size:8px;color:var(--ui-label);font-family:Courier New,monospace;background:#0009;padding:2px 4px;border-radius:3px;white-space:nowrap}.truck-indicator.passed .truck-time{color:var(--ui-accent-money)}.truck-indicator.current .truck-time{color:#ffd93d;font-weight:700}.truck-indicator.gone .truck-time{color:#10b981}.truck-indicator.outbound .truck-icon{color:#f59e0b;filter:none}.truck-indicator.outbound.passed .truck-icon{color:#ffb86b;animation:truck-pulse 2s infinite}.truck-indicator.outbound.current .truck-icon{transform:scale(1.2);color:#ffb86b}.truck-indicator.outbound .truck-time{color:#f6ad55}@keyframes truck-pulse{0%,to{opacity:1}50%{opacity:.7}}@keyframes truck-bounce{0%{transform:scale(1.2) translateY(0)}to{transform:scale(1.2) translateY(-3px)}}.tooltip{position:absolute;background:#000000e6;border:1px solid var(--ui-accent-money);border-radius:4px;padding:8px 12px;color:#fff;font-size:12px;pointer-events:none;z-index:1000;max-width:200px}#worker-debug-panel{position:absolute;right:20px;bottom:80px;width:280px;max-height:calc(100vh - 200px);overflow-y:auto;background:var(--ui-bg-heavy);border-radius:8px;border:2px solid var(--ui-border);padding:12px;color:var(--ui-text);font-size:12px;display:none}#worker-debug-panel.visible{display:block}#reservations-debug-panel{position:absolute;left:20px;bottom:80px;width:300px;max-height:calc(100vh - 200px);overflow-y:auto;background:var(--ui-bg-heavy);border-radius:8px;border:2px solid var(--ui-border);padding:12px;color:var(--ui-text);font-size:12px;display:none}#reservations-debug-panel.visible{display:block}#debug-log-panel{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:min(550px,90vw);max-height:70vh;overflow:hidden;background:var(--ui-bg-heavy);border-radius:8px;border:2px solid var(--ui-border);padding:12px;color:var(--ui-text);font-size:12px;display:none;z-index:500}#debug-log-panel.visible{display:flex;flex-direction:column}#debug-log-entries-panel{overflow-y:auto;max-height:calc(70vh - 60px);display:flex;flex-direction:column;gap:4px;font-family:Courier New,Courier,monospace;margin-top:8px}.debug-panel-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;border-bottom:1px solid var(--ui-border);padding-bottom:8px}.debug-panel-title{font-size:14px;text-transform:uppercase;color:var(--ui-label)}.debug-toggle-btn{background:var(--item-bg);border:1px solid var(--btn-border);border-radius:4px;color:var(--ui-label);padding:4px 8px;font-size:10px;cursor:pointer;transition:all .2s ease}.debug-toggle-btn:hover{background:var(--shadow-color);border-color:var(--ui-accent-money)}.worker-card{background:var(--item-bg);border-radius:6px;padding:10px;margin-bottom:8px;border-left:3px solid var(--btn-border)}.worker-card.forklift{border-left-color:#f59e0b}.worker-card.operator{border-left-color:#10b981}.reservation-section{background:var(--item-bg);border-radius:6px;padding:10px;margin-bottom:8px}.reservation-section-title{font-weight:700;margin-bottom:6px;padding-bottom:4px;border-bottom:1px solid rgba(255,255,255,.1)}.reservation-item{padding:4px 0;font-size:11px;color:var(--ui-text)}.reservation-location{color:var(--ui-accent-money);font-family:monospace}.worker-card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}.worker-type{font-weight:700;font-size:11px;text-transform:uppercase}.worker-card.forklift .worker-type{color:#f59e0b}.worker-card.operator .worker-type{color:#10b981}.worker-id{font-size:9px;color:var(--ui-label);font-family:Courier New,monospace}.worker-status{display:flex;align-items:center;gap:6px;margin-bottom:4px}.status-dot{width:8px;height:8px;border-radius:50%;background:var(--ui-label)}.status-dot.idle{background:var(--ui-label)}.status-dot.moving-to-source{background:#3b82f6;animation:pulse-dot 1s infinite}.status-dot.picking{background:#8b5cf6;animation:pulse-dot .5s infinite}.status-dot.moving-to-dest{background:#f59e0b;animation:pulse-dot 1s infinite}.status-dot.dropping{background:#10b981;animation:pulse-dot .5s infinite}@keyframes pulse-dot{0%,to{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(.8)}}.status-text{font-size:11px;color:var(--ui-value);text-transform:capitalize}.worker-task-info{font-size:10px;color:var(--ui-label);padding-left:14px}.task-type{color:var(--ui-accent-money);font-weight:700}.task-location{color:var(--ui-label)}.worker-state-badge{display:inline-block;padding:2px 6px;border-radius:3px;font-size:9px;font-weight:700;text-transform:uppercase;margin-left:6px}.worker-state-badge.carrying{background:#8b5cf64d;color:#a78bfa}.worker-state-badge.blocked{background:#ef44444d;color:#f87171}.no-workers{text-align:center;color:var(--ui-label);padding:20px;font-style:italic}.debug-stats{display:flex;gap:12px;margin-bottom:10px;padding:8px;background:var(--item-bg);border-radius:4px}.debug-stat{text-align:center}.debug-stat-value{font-size:16px;font-weight:700;color:var(--ui-accent-money)}.debug-stat-label{font-size:9px;color:var(--ui-label);text-transform:uppercase}#mobile-menu{display:none;pointer-events:auto}@media(max-width:768px){#hud{top:10px;gap:10px;padding:8px 12px;width:auto;max-width:80%;flex-wrap:wrap;justify-content:center}.hud-stat{gap:4px}.hud-stat .label{font-size:10px}.hud-stat .value{font-size:14px}.hud-stat.debug-hint,#build-menu,#order-panel,#wave-preview{display:none}#mobile-menu{display:flex;flex-direction:column;position:absolute;right:0;top:50%;transform:translateY(-50%);gap:8px;padding:8px 6px;background:var(--ui-bg);border-radius:8px 0 0 8px;border:2px solid var(--ui-border);border-right:none;z-index:50}.mobile-menu-btn{width:44px;height:44px;background:var(--btn-bg);border:2px solid var(--btn-border);border-radius:8px;font-size:20px;cursor:pointer;display:flex;align-items:center;justify-content:center;color:var(--ui-text);transition:all .2s ease;touch-action:manipulation}.mobile-menu-btn.active{background:var(--btn-selected);border-color:var(--ui-accent-money);box-shadow:0 0 8px var(--shadow-color)}.mobile-menu-btn{position:relative}.mobile-badge{display:none;position:absolute;top:-6px;right:-6px;min-width:18px;height:18px;padding:0 4px;background:var(--ui-accent-wave);color:#fff;font-size:10px;font-weight:700;border-radius:9px;align-items:center;justify-content:center;line-height:1;pointer-events:none}.mobile-badge.visible{display:flex}#build-menu.mobile-open{display:flex!important;flex-direction:row;flex-wrap:wrap;position:absolute;inset:auto 10px 60px auto;width:200px;max-height:50vh;overflow-y:auto;transform:none;padding:10px;z-index:70}#order-panel.mobile-open,#wave-preview.mobile-open{display:block!important;position:absolute;inset:auto 10px 60px auto;width:200px;max-height:50vh;overflow-y:auto;transform:none;z-index:70}#economy-panel{display:none}#economy-panel.mobile-open{display:block!important;position:absolute;inset:auto 10px 60px auto;width:200px;max-height:50vh;overflow-y:auto;transform:none;z-index:70}#phase-indicator{position:absolute;bottom:12px;left:10px;top:auto;padding:8px 12px;z-index:60}#selection-panel{right:10px;bottom:60px;top:auto;transform:none;width:200px;max-height:50vh;overflow-y:auto;z-index:70}.build-btn{min-width:60px;height:70px;flex-shrink:0}.wave-preview-title{font-size:12px}.wave-stat .icon{font-size:16px;width:20px}.wave-stat .info .value{font-size:12px}.phase-name{font-size:16px}.phase-btn,.speed-btn,.fulfill-btn{min-height:44px;min-width:44px;display:flex;align-items:center;justify-content:center}.toggle-panel-btn{display:none}#order-panel.collapsed #order-list-container,.wave-preview-content.collapsed-content{display:block}}.toggle-panel-btn{background:var(--item-bg);border:1px solid var(--btn-border);border-radius:4px;color:var(--ui-label);width:24px;height:24px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:16px;font-weight:700;transition:all .2s ease}.toggle-panel-btn:hover{background:var(--shadow-color);border-color:var(--ui-accent-money);color:var(--ui-text)}#order-panel.collapsed{height:auto}#order-panel.collapsed #order-list-container,.wave-preview-content.collapsed-content{display:none}#economy-panel{position:absolute;right:20px;bottom:20px;width:220px;background:var(--ui-bg-heavy);border-radius:8px;border:2px solid var(--ui-border);padding:12px;color:var(--ui-text);box-shadow:0 4px 15px #0003;z-index:60}#economy-panel.collapsed #economy-panel-content{display:none}.economy-panel-title{font-size:14px;text-transform:uppercase;color:var(--ui-label);margin-bottom:10px;border-bottom:1px solid var(--ui-border);padding-bottom:8px;display:flex;justify-content:space-between;align-items:center}.economy-section-label{font-size:10px;text-transform:uppercase;color:var(--ui-label);margin-bottom:6px;margin-top:8px}.economy-section-label:first-child{margin-top:0}.economy-wage-row{display:flex;justify-content:space-between;align-items:center;font-size:12px;padding:3px 0}.economy-wage-label{color:var(--ui-label)}.economy-wage-value{color:var(--ui-accent-wave);font-weight:700}.economy-wage-value.economy-positive{color:var(--ui-accent-money)}.economy-wage-total{border-top:1px solid var(--ui-border);margin-top:4px;padding-top:4px}.economy-wage-total .economy-wage-label{color:var(--ui-text)}.economy-history-header{display:grid;grid-template-columns:1.5fr 1.5fr 1.5fr 1.5fr 2fr;font-size:9px;text-transform:uppercase;color:var(--ui-label);padding:2px 0 4px;border-bottom:1px solid var(--ui-border);margin-bottom:4px}.economy-history-row{display:grid;grid-template-columns:1.5fr 1.5fr 1.5fr 1.5fr 2fr;font-size:11px;padding:3px 0;border-bottom:1px solid rgba(61,90,128,.2)}.economy-history-wave{color:var(--ui-accent-wave);font-weight:700}.economy-history-bonus,.economy-history-orders{color:var(--ui-accent-money)}.economy-history-wages{color:var(--ui-accent-wave)}.economy-history-net.positive{color:var(--ui-accent-money);font-weight:700}.economy-history-net.negative{color:var(--ui-accent-wave);font-weight:700}.economy-no-history{font-size:12px;color:var(--ui-label);font-style:italic;text-align:center;padding:8px 0}#theme-toggle{pointer-events:auto;background:var(--ui-bg);border:2px solid var(--ui-border);color:var(--ui-text);border-radius:50%;width:44px;height:44px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;font-size:20px;transition:all .18s ease;box-shadow:0 4px 10px #0003}#theme-toggle:hover{transform:scale(1.1);background:var(--ui-accent-money);border-color:var(--ui-accent-money);color:#fff}#top-controls{position:absolute;top:16px;right:16px;z-index:120;display:flex;gap:8px;pointer-events:auto}.top-control-btn,#btn-camera-toggle,#btn-rotate-camera{background:var(--ui-bg);border:2px solid var(--ui-border);color:var(--ui-text);border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:16px;transition:all .18s ease;box-shadow:0 4px 8px #0000001f}#btn-camera-toggle.active{background:var(--ui-accent-money);color:#fff;border-color:var(--ui-accent-money)}#btn-rotate-camera:hover,#btn-camera-toggle:hover{transform:scale(1.08)}
